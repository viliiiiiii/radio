#!/bin/sh
set -e

# If base64 cookies provided, decode to a real file
if [ -n "IyBOZXRzY2FwZSBIVFRQIENvb2tpZSBGaWxlCiMgaHR0cDovL2N1cmwuaGF4eC5zZS9yZmMvY29va2llX3NwZWMuaHRtbAojIFRoaXMgaXMgYSBnZW5lcmF0ZWQgZmlsZSEgIERvIG5vdCBlZGl0LgoKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3OTI3MTAyNjkJUFJFRglmNj00MDAwMDAwMCZmNz00MTQwJnR6PUV1cm9wZS5Qb2Rnb3JpY2EmZjU9MzAwMDAmZjQ9NDAwMDAwMAoueW91dHViZS5jb20JVFJVRQkvCUZBTFNFCTE3OTI0ODgyMzkJSFNJRAlBS1k1SDg0WVFGdHhLSFFKdgoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlTU0lECUFrNU5DcEstQ1AyTlR4M0RDCi55b3V0dWJlLmNvbQlUUlVFCS8JRkFMU0UJMTc5MjQ4ODIzOQlBUElTSUQJS2hETDFoTENLakJuSkNvbi9BeVJWZFdFdUZkdldVZkplbQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlTQVBJU0lECWhoNmNyNk5VNWlPVFh3cWovQXh4UjV3ZXUyT1VXR2s3YzYKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3OTI0ODgyMzkJX19TZWN1cmUtMVBBUElTSUQJaGg2Y3I2TlU1aU9UWHdxai9BeHhSNXdldTJPVVdHazdjNgoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlfX1NlY3VyZS0zUEFQSVNJRAloaDZjcjZOVTVpT1RYd3FqL0F4eFI1d2V1Mk9VV0drN2M2Ci55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzc5OTEwNzIzCUxPR0lOX0lORk8JQUZtbUYyc3dSUUlnWjZldTlrX3d3OTdsS2lHSnRONksyM1NzYmtRRWZERk5pSlgyX25xOG1La0NJUURiVnpZUXhIV2d4ZDhtVmN0Z083a3FCZmJKSG56dklzekhPQlF4ZVZSZVZBOlFVUTNNak5tZUdZM2MyNTJPRmh4Um1wMFVuQkZNVzQ1UlZKa2FXWXhlVXBOWkc1QlExcGlhRzlHUmtSWFpuWmhhMDE0ZVRONk9VNUNVbkY0VkZKWWIwTTBVazB5YzFwRmMwaDJOMmsxUzJGVFRVaDZUbWMxTldGRVlqQm9XalpUVFhocFIxRkpOVmd0ZFhWVlNVMDRjbFpUVFdwbUxYWTBURzltVmpWU2QzRnlWMk5vZFZSRGRUZHlWa1JoTmpsbVdVNUJSbU40Umt0TE5sSnVUV1JhTVhSQgoueW91dHViZS5jb20JVFJVRQkvCUZBTFNFCTE3OTI0ODgyMzkJU0lECWcuYTAwMDFRaUd5TXpRNjNjY0hYbGFNOGR1M19RWEZlQzQ0VFc1NDd3TXlPb0JZcEdTRlYzeG1mendweTlnbVF4OFoxYzB3QjZNVHdBQ2dZS0FRc1NBUlVTRlFIR1gyTWlKV0pmV241NU9ibEgteDRJTUl3Q2pob1ZBVUY4eUtwaU5STnBHUUR1ZG5zTDZVT3pTdlBiMDA3NgoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlfX1NlY3VyZS0xUFNJRAlnLmEwMDAxUWlHeU16UTYzY2NIWGxhTThkdTNfUVhGZUM0NFRXNTQ3d015T29CWXBHU0ZWM3hRanNDUjZlbjliejVEcnFFeWZTbmlnQUNnWUtBWUFTQVJVU0ZRSEdYMk1pNWM1bU85UzdpWjRxektFS096cGhwUm9WQVVGOHlLcUoyU0tvUDBzMXFpLU1lTy1yajNoaTAwNzYKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3OTI0ODgyMzkJX19TZWN1cmUtM1BTSUQJZy5hMDAwMVFpR3lNelE2M2NjSFhsYU04ZHUzX1FYRmVDNDRUVzU0N3dNeU9vQllwR1NGVjN4UEQzRFNnLXJpb05rSTFmazEyZjlYZ0FDZ1lLQVpvU0FSVVNGUUhHWDJNaUpuMndNa3pJZlVVYjhsUWxPb29yb0JvVkFVRjh5S3J6S0NrMmdnODBkYVRLN3R0T1V6QzUwMDc2Ci55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzg5Njg2Mjc5CV9fU2VjdXJlLTFQU0lEVFMJc2lkdHMtQ2pJQm1rRDVTMzF5bXhHcE9uN0xWOXQ0SkxDamJqNHdFMGZhNzVmS3VKbGI5M2pGWndyM1hTYi1PVlgxamFhREdvTVNJQkFBCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzg5Njg2Mjc5CV9fU2VjdXJlLTNQU0lEVFMJc2lkdHMtQ2pJQm1rRDVTMzF5bXhHcE9uN0xWOXQ0SkxDamJqNHdFMGZhNzVmS3VKbGI5M2pGWndyM1hTYi1PVlgxamFhREdvTVNJQkFBCi55b3V0dWJlLmNvbQlUUlVFCS8JRkFMU0UJMTc4OTY4NjMyNwlTSURDQwlBS0V5WHpVZWliZ1puUHphTzJjRUNqTXVncWhaN2xYY3pkZmh2emYxeHlLUTdxc1E0anhOQkdwbGlBSy1Kb0ZaSnF2ODQ1YkV6dwoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc4OTY4NjMyNwlfX1NlY3VyZS0xUFNJRENDCUFLRXlYelVLRXpiclo0UFlqZVdiRzhBdFlrbE4zZTJpWHRzWWlxS2JJMjRyNlVDRGt2emhnSFFlZWRxN3hIcnd6WlgybGZxMkhBCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzg5Njg2MzI3CV9fU2VjdXJlLTNQU0lEQ0MJQUtFeVh6Vzk0c291a2Y3WV9JbnE3dTh4WWl3eFVHQWtZQ2RXcUJlSTVSUWNMS1hQdG9VYkdhN3FnSkFTSzRQblh5VEEyNkY5UFEKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3NzM3MDIyNjAJVklTSVRPUl9QUklWQUNZX01FVEFEQVRBCUNnSk5SUklFR2dBZ0l3JTNEJTNECi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzczNzAyMjYwCVZJU0lUT1JfSU5GTzFfTElWRQlDSWhmbF9YZFNYMAoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMAlZU0MJcVJ1YjlWLU1xYmMKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3NzM2OTg2MzAJX19TZWN1cmUtUk9MTE9VVF9UT0tFTglDTnFvdXFIeGdmQ05UUkN1cHBxb19xcUxBeGpRMVliSzV1Q1BBdyUzRCUzRAo=" ]; then
  echo "IyBOZXRzY2FwZSBIVFRQIENvb2tpZSBGaWxlCiMgaHR0cDovL2N1cmwuaGF4eC5zZS9yZmMvY29va2llX3NwZWMuaHRtbAojIFRoaXMgaXMgYSBnZW5lcmF0ZWQgZmlsZSEgIERvIG5vdCBlZGl0LgoKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3OTI3MTAyNjkJUFJFRglmNj00MDAwMDAwMCZmNz00MTQwJnR6PUV1cm9wZS5Qb2Rnb3JpY2EmZjU9MzAwMDAmZjQ9NDAwMDAwMAoueW91dHViZS5jb20JVFJVRQkvCUZBTFNFCTE3OTI0ODgyMzkJSFNJRAlBS1k1SDg0WVFGdHhLSFFKdgoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlTU0lECUFrNU5DcEstQ1AyTlR4M0RDCi55b3V0dWJlLmNvbQlUUlVFCS8JRkFMU0UJMTc5MjQ4ODIzOQlBUElTSUQJS2hETDFoTENLakJuSkNvbi9BeVJWZFdFdUZkdldVZkplbQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlTQVBJU0lECWhoNmNyNk5VNWlPVFh3cWovQXh4UjV3ZXUyT1VXR2s3YzYKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3OTI0ODgyMzkJX19TZWN1cmUtMVBBUElTSUQJaGg2Y3I2TlU1aU9UWHdxai9BeHhSNXdldTJPVVdHazdjNgoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlfX1NlY3VyZS0zUEFQSVNJRAloaDZjcjZOVTVpT1RYd3FqL0F4eFI1d2V1Mk9VV0drN2M2Ci55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzc5OTEwNzIzCUxPR0lOX0lORk8JQUZtbUYyc3dSUUlnWjZldTlrX3d3OTdsS2lHSnRONksyM1NzYmtRRWZERk5pSlgyX25xOG1La0NJUURiVnpZUXhIV2d4ZDhtVmN0Z083a3FCZmJKSG56dklzekhPQlF4ZVZSZVZBOlFVUTNNak5tZUdZM2MyNTJPRmh4Um1wMFVuQkZNVzQ1UlZKa2FXWXhlVXBOWkc1QlExcGlhRzlHUmtSWFpuWmhhMDE0ZVRONk9VNUNVbkY0VkZKWWIwTTBVazB5YzFwRmMwaDJOMmsxUzJGVFRVaDZUbWMxTldGRVlqQm9XalpUVFhocFIxRkpOVmd0ZFhWVlNVMDRjbFpUVFdwbUxYWTBURzltVmpWU2QzRnlWMk5vZFZSRGRUZHlWa1JoTmpsbVdVNUJSbU40Umt0TE5sSnVUV1JhTVhSQgoueW91dHViZS5jb20JVFJVRQkvCUZBTFNFCTE3OTI0ODgyMzkJU0lECWcuYTAwMDFRaUd5TXpRNjNjY0hYbGFNOGR1M19RWEZlQzQ0VFc1NDd3TXlPb0JZcEdTRlYzeG1mendweTlnbVF4OFoxYzB3QjZNVHdBQ2dZS0FRc1NBUlVTRlFIR1gyTWlKV0pmV241NU9ibEgteDRJTUl3Q2pob1ZBVUY4eUtwaU5STnBHUUR1ZG5zTDZVT3pTdlBiMDA3NgoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc5MjQ4ODIzOQlfX1NlY3VyZS0xUFNJRAlnLmEwMDAxUWlHeU16UTYzY2NIWGxhTThkdTNfUVhGZUM0NFRXNTQ3d015T29CWXBHU0ZWM3hRanNDUjZlbjliejVEcnFFeWZTbmlnQUNnWUtBWUFTQVJVU0ZRSEdYMk1pNWM1bU85UzdpWjRxektFS096cGhwUm9WQVVGOHlLcUoyU0tvUDBzMXFpLU1lTy1yajNoaTAwNzYKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3OTI0ODgyMzkJX19TZWN1cmUtM1BTSUQJZy5hMDAwMVFpR3lNelE2M2NjSFhsYU04ZHUzX1FYRmVDNDRUVzU0N3dNeU9vQllwR1NGVjN4UEQzRFNnLXJpb05rSTFmazEyZjlYZ0FDZ1lLQVpvU0FSVVNGUUhHWDJNaUpuMndNa3pJZlVVYjhsUWxPb29yb0JvVkFVRjh5S3J6S0NrMmdnODBkYVRLN3R0T1V6QzUwMDc2Ci55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzg5Njg2Mjc5CV9fU2VjdXJlLTFQU0lEVFMJc2lkdHMtQ2pJQm1rRDVTMzF5bXhHcE9uN0xWOXQ0SkxDamJqNHdFMGZhNzVmS3VKbGI5M2pGWndyM1hTYi1PVlgxamFhREdvTVNJQkFBCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzg5Njg2Mjc5CV9fU2VjdXJlLTNQU0lEVFMJc2lkdHMtQ2pJQm1rRDVTMzF5bXhHcE9uN0xWOXQ0SkxDamJqNHdFMGZhNzVmS3VKbGI5M2pGWndyM1hTYi1PVlgxamFhREdvTVNJQkFBCi55b3V0dWJlLmNvbQlUUlVFCS8JRkFMU0UJMTc4OTY4NjMyNwlTSURDQwlBS0V5WHpVZWliZ1puUHphTzJjRUNqTXVncWhaN2xYY3pkZmh2emYxeHlLUTdxc1E0anhOQkdwbGlBSy1Kb0ZaSnF2ODQ1YkV6dwoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc4OTY4NjMyNwlfX1NlY3VyZS0xUFNJRENDCUFLRXlYelVLRXpiclo0UFlqZVdiRzhBdFlrbE4zZTJpWHRzWWlxS2JJMjRyNlVDRGt2emhnSFFlZWRxN3hIcnd6WlgybGZxMkhBCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzg5Njg2MzI3CV9fU2VjdXJlLTNQU0lEQ0MJQUtFeVh6Vzk0c291a2Y3WV9JbnE3dTh4WWl3eFVHQWtZQ2RXcUJlSTVSUWNMS1hQdG9VYkdhN3FnSkFTSzRQblh5VEEyNkY5UFEKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3NzM3MDIyNjAJVklTSVRPUl9QUklWQUNZX01FVEFEQVRBCUNnSk5SUklFR2dBZ0l3JTNEJTNECi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxNzczNzAyMjYwCVZJU0lUT1JfSU5GTzFfTElWRQlDSWhmbF9YZFNYMAoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMAlZU0MJcVJ1YjlWLU1xYmMKLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3NzM2OTg2MzAJX19TZWN1cmUtUk9MTE9VVF9UT0tFTglDTnFvdXFIeGdmQ05UUkN1cHBxb19xcUxBeGpRMVliSzV1Q1BBdyUzRCUzRAo=" | base64 -d > /cookies.txt || true
fi

exec "$@"
